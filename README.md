# Приложение для хранения безсхемных данных различных типов в иерархическом порядке (NoSQL).

Ключевым требованием к хранилищу является способность быстро осуществлять вставку новых элементов не зависимо от размеров файла хранилища.

[схема модульного разденления]

Модель хранения данных напоминает реестр Windows.

Структура данных, предоставляющая возможность иерархического хранения сущностей - документное дерево.

Консистентность данных поддерживается посредством сохранения документного дерева на диск в файл, разделённый на блоки разных типов:

- Заголовочные
- Мета-данных
- Данных
  1. Фиксированного размера
  2. Произвольного размера
- Имён

Размер блока данных совпадает с размером страницы памяти целевой системы в целях ускорения доступа к данным и унификации работы с памятью.

Из-за специфики применения хранилищ данных, они подвержены фрагментации: при удалении элементов данных, добавленных не последними, появляются свободные участки (клетки) в блоках, которые могут быть переиспользованы для предотвращения появления бесполезно используемой памяти.

Для устранения фрагментации данных в блоках, применяется две стратегии, основанные на идеях slab распределения, оптимизирующие размещение данных в файле, хранящем информацию, и осуществляющие наиболее эффективное управление распределением новых данных.

1. Для однородных данных: блоки, хранящие данные только одного типа (т.е. одинакового размера за исключением строк произвольной длины), располагают данные последовательно и хранят указатель на начало свободного хранят в своих заголовках информацию о кол

2. Для неоднородных данных:

Для быстрого поиска места для расположения новой информации существуют блоки мета-данных, хранящие указатели на положение блоков и информацию о том, имеют ли они свободные

При определённом сцениарии использования этой системы, методы для устранения фрагментации не будут устранять фрагментацию совсем, и поэтому имеет смысл создать механизм дефрагментации.  
- Во время дефрагментации доступ к системе хранения данных будет запрещён.
- Незанятые блоки данных будут обнаружены (либо найдены через имеющиеся мета-данные) и заполнены расположенными рядом клетками, максимально подходящими по размеру

## Типы блоков
- header - для хранения номеров блоков, с которых начинается какая-либо таблица
-
